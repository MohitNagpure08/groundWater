<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-Time Groundwater Level Monitor</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .status-indicator {
            display: inline-flex;
            align-items: center;
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            margin-top: 10px;
        }
        
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #4ade80;
            margin-right: 8px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card h3 {
            color: #374151;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }
        
        .metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            background: #f8fafc;
            border-radius: 8px;
        }
        
        .metric-label {
            color: #6b7280;
            font-weight: 500;
        }
        
        .metric-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1f2937;
        }
        
        .water-level {
            color: #3b82f6;
        }
        
        .trend-up {
            color: #ef4444;
        }
        
        .trend-down {
            color: #10b981;
        }
        
        .chart-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 20px;
            height: 350px;
        }
        
        .forecast-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .forecast-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-top: 4px solid #3b82f6;
        }
        
        .forecast-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .forecast-icon {
            font-size: 2rem;
            margin-right: 12px;
        }
        
        .forecast-title {
            font-weight: bold;
            color: #1f2937;
        }
        
        .forecast-subtitle {
            color: #6b7280;
            font-size: 0.9rem;
        }
        
        .forecast-content {
            margin-bottom: 15px;
        }
        
        .forecast-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f3f4f6;
        }
        
        .forecast-item:last-child {
            border-bottom: none;
        }
        
        .forecast-label {
            color: #6b7280;
            font-size: 0.9rem;
        }
        
        .forecast-value {
            font-weight: bold;
            color: #1f2937;
        }
        
        .risk-high {
            color: #dc2626;
        }
        
        .risk-medium {
            color: #f59e0b;
        }
        
        .risk-low {
            color: #10b981;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin: 8px 0;
        }
        
        .progress-fill {
            height: 100%;
            transition: width 0.3s ease;
        }
        
        .progress-drought {
            background: linear-gradient(90deg, #fbbf24, #f59e0b);
        }
        
        .progress-rain {
            background: linear-gradient(90deg, #60a5fa, #3b82f6);
        }
        
        .progress-flood {
            background: linear-gradient(90deg, #f87171, #dc2626);
        }
        
        .alert-banner {
            background: linear-gradient(135deg, #fee2e2, #fecaca);
            border: 1px solid #f87171;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        
        .alert-icon {
            font-size: 1.5rem;
            margin-right: 12px;
        }
        
        .alert-text {
            flex: 1;
        }
        
        .alert-title {
            font-weight: bold;
            color: #991b1b;
            margin-bottom: 4px;
        }
        
        .alert-desc {
            color: #7f1d1d;
            font-size: 0.9rem;
        }
        
        .weather-timeline {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding: 10px 0;
        }
        
        .timeline-item {
            min-width: 80px;
            text-align: center;
            padding: 10px;
            background: #f8fafc;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
        }
        
        .timeline-day {
            font-size: 0.8rem;
            color: #6b7280;
            margin-bottom: 5px;
        }
        
        .timeline-weather {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        
        .timeline-temp {
            font-size: 0.8rem;
            color: #374151;
            font-weight: 500;
        }
        
        .timeline-rain {
            font-size: 0.7rem;
            color: #3b82f6;
            margin-top: 2px;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .btn-small {
            padding: 6px 12px;
            font-size: 0.8rem;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .btn-success {
            background: #10b981;
            color: white;
        }
        
        .btn-success:hover {
            background: #059669;
        }
        
        .btn-warning {
            background: #f59e0b;
            color: white;
        }
        
        .btn-warning:hover {
            background: #d97706;
        }
        
        .smart-recommendations {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border: 1px solid #bae6fd;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .recommendation-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .recommendation-icon {
            font-size: 1.5rem;
            margin-right: 10px;
        }
        
        .recommendation-title {
            font-weight: bold;
            color: #0c4a6e;
        }
        
        .recommendation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .recommendation-item {
            background: white;
            padding: 12px;
            border-radius: 8px;
            border-left: 3px solid #3b82f6;
        }
        
        .rec-title {
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .rec-desc {
            color: #475569;
            font-size: 0.8rem;
        }
        
        .stations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .station-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 5px solid #3b82f6;
        }
        
        .station-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .station-name {
            font-weight: bold;
            color: #1f2937;
        }
        
        .station-status {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .status-online {
            background: #dcfce7;
            color: #166534;
        }
        
        .status-offline {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .water-visual {
            position: relative;
            height: 100px;
            background: #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
            margin: 15px 0;
        }
        
        .water-fill {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, #1e40af, #3b82f6);
            transition: height 0.5s ease;
            border-radius: 0 0 8px 8px;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: #3b82f6;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2563eb;
        }
        
        .btn-secondary {
            background: #6b7280;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #4b5563;
        }
        
        .user-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .user-card {
            background: rgba(255,255,255,0.9);
            border-radius: 12px;
            padding: 15px 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            text-align: center;
            min-width: 120px;
        }
        
        .user-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        
        .user-card.active {
            border-color: #3b82f6;
            background: white;
        }
        
        .user-icon {
            font-size: 2rem;
            margin-bottom: 8px;
        }
        
        .user-title {
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 4px;
        }
        
        .user-subtitle {
            font-size: 0.8rem;
            color: #6b7280;
        }
        
        .role-dashboard {
            display: none;
        }
        
        .role-dashboard.active {
            display: block;
        }
        
        .insights-panel {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 20px;
        }
        
        .insight-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: #f8fafc;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #3b82f6;
        }
        
        .insight-icon {
            font-size: 1.5rem;
            margin-right: 15px;
        }
        
        .insight-text {
            flex: 1;
        }
        
        .insight-title {
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 4px;
        }
        
        .insight-desc {
            color: #6b7280;
            font-size: 0.9rem;
        }
        
        .alert-panel {
            background: #fef2f2;
            border: 1px solid #fecaca;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .alert-critical {
            background: #fef2f2;
            border-color: #fca5a5;
        }
        
        .alert-warning {
            background: #fffbeb;
            border-color: #fcd34d;
        }
        
        .alert-info {
            background: #eff6ff;
            border-color: #93c5fd;
        }
        
        .recommendations {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .recommendation-card {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 8px;
            padding: 15px;
        }
        
        .recommendation-title {
            font-weight: bold;
            color: #0c4a6e;
            margin-bottom: 8px;
        }
        
        .recommendation-text {
            color: #075985;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🌊 Groundwater Level Monitor</h1>
            <p>Real-time DWLR Data Monitoring System</p>
            <div class="status-indicator">
                <div class="status-dot"></div>
                <span>Live Data Feed Active</span>
            </div>
        </div>

        <div class="user-selector">
            <div class="user-card active" onclick="switchUser('farmer')">
                <div class="user-icon">🌾</div>
                <div class="user-title">Farmer</div>
                <div class="user-subtitle">Irrigation Planning</div>
            </div>
            <div class="user-card" onclick="switchUser('policymaker')">
                <div class="user-icon">🏛️</div>
                <div class="user-title">Policy Maker</div>
                <div class="user-subtitle">Resource Management</div>
            </div>
            <div class="user-card" onclick="switchUser('researcher')">
                <div class="user-icon">🔬</div>
                <div class="user-title">Researcher</div>
                <div class="user-subtitle">Data Analysis</div>
            </div>
        </div>

        <!-- Farmer Dashboard -->
        <div class="role-dashboard active" id="farmer-dashboard">
            <div class="alert-banner">
                <div class="alert-icon">🌧️</div>
                <div class="alert-text">
                    <div class="alert-title">Heavy Rain Alert - Next 48 Hours</div>
                    <div class="alert-desc">Expected rainfall: 85mm. Prepare drainage systems and postpone irrigation. Flood risk: Medium</div>
                </div>
            </div>

            <div class="forecast-grid">
                <div class="forecast-card">
                    <div class="forecast-header">
                        <div class="forecast-icon">🌦️</div>
                        <div>
                            <div class="forecast-title">Weather Forecast</div>
                            <div class="forecast-subtitle">7-Day Outlook</div>
                        </div>
                    </div>
                    <div class="weather-timeline">
                        <div class="timeline-item">
                            <div class="timeline-day">Today</div>
                            <div class="timeline-weather">⛅</div>
                            <div class="timeline-temp">28°C</div>
                            <div class="timeline-rain">15mm</div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-day">Tomorrow</div>
                            <div class="timeline-weather">🌧️</div>
                            <div class="timeline-temp">24°C</div>
                            <div class="timeline-rain">45mm</div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-day">Wed</div>
                            <div class="timeline-weather">⛈️</div>
                            <div class="timeline-temp">22°C</div>
                            <div class="timeline-rain">65mm</div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-day">Thu</div>
                            <div class="timeline-weather">🌤️</div>
                            <div class="timeline-temp">26°C</div>
                            <div class="timeline-rain">5mm</div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-day">Fri</div>
                            <div class="timeline-weather">☀️</div>
                            <div class="timeline-temp">30°C</div>
                            <div class="timeline-rain">0mm</div>
                        </div>
                    </div>
                </div>

                <div class="forecast-card">
                    <div class="forecast-header">
                        <div class="forecast-icon">🏜️</div>
                        <div>
                            <div class="forecast-title">Drought Risk Analysis</div>
                            <div class="forecast-subtitle">30-Day Prediction</div>
                        </div>
                    </div>
                    <div class="forecast-content">
                        <div class="forecast-item">
                            <span class="forecast-label">Current Risk Level</span>
                            <span class="forecast-value risk-low">Low</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill progress-drought" style="width: 25%"></div>
                        </div>
                        <div class="forecast-item">
                            <span class="forecast-label">Soil Moisture</span>
                            <span class="forecast-value">68%</span>
                        </div>
                        <div class="forecast-item">
                            <span class="forecast-label">Days to Critical</span>
                            <span class="forecast-value">45 days</span>
                        </div>
                    </div>
                </div>

                <div class="forecast-card">
                    <div class="forecast-header">
                        <div class="forecast-icon">🌊</div>
                        <div>
                            <div class="forecast-title">Flood Risk Monitor</div>
                            <div class="forecast-subtitle">Real-time Assessment</div>
                        </div>
                    </div>
                    <div class="forecast-content">
                        <div class="forecast-item">
                            <span class="forecast-label">Flood Risk</span>
                            <span class="forecast-value risk-medium">Medium</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill progress-flood" style="width: 60%"></div>
                        </div>
                        <div class="forecast-item">
                            <span class="forecast-label">River Level</span>
                            <span class="forecast-value">4.2m</span>
                        </div>
                        <div class="forecast-item">
                            <span class="forecast-label">Alert Threshold</span>
                            <span class="forecast-value">5.5m</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="smart-recommendations">
                <div class="recommendation-header">
                    <div class="recommendation-icon">🤖</div>
                    <div class="recommendation-title">AI-Powered Farming Recommendations</div>
                </div>
                <div class="recommendation-grid">
                    <div class="recommendation-item">
                        <div class="rec-title">Irrigation Schedule</div>
                        <div class="rec-desc">Skip irrigation for next 3 days due to expected rainfall</div>
                    </div>
                    <div class="recommendation-item">
                        <div class="rec-title">Crop Protection</div>
                        <div class="rec-desc">Apply fungicide before rain to prevent crop diseases</div>
                    </div>
                    <div class="recommendation-item">
                        <div class="rec-title">Harvesting</div>
                        <div class="rec-desc">Harvest Zone A crops within 48 hours before heavy rain</div>
                    </div>
                    <div class="recommendation-item">
                        <div class="rec-title">Soil Management</div>
                        <div class="rec-desc">Prepare drainage channels in low-lying areas</div>
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="btn-small btn-success" onclick="sendAlert('irrigation')">Set Irrigation Reminder</button>
                    <button class="btn-small btn-warning" onclick="sendAlert('weather')">Weather Alert SMS</button>
                </div>
            </div>
            
            <div class="dashboard">
                <div class="card">
                    <h3>🚜 Farm Zone Status</h3>
                    <div class="metric">
                        <span class="metric-label">Zone A (Rice)</span>
                        <span class="metric-value water-level">18.5m ✅</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Zone B (Wheat)</span>
                        <span class="metric-value water-level">22.1m ✅</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Zone C (Vegetables)</span>
                        <span class="metric-value trend-down">8.7m ⚠️</span>
                    </div>
                </div>

                <div class="card">
                    <h3>💰 Water Cost Analysis</h3>
                    <div class="metric">
                        <span class="metric-label">Today's Usage</span>
                        <span class="metric-value">2,450L</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Estimated Cost</span>
                        <span class="metric-value">₹245</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Monthly Savings</span>
                        <span class="metric-value trend-up">₹1,200 ↑</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Policy Maker Dashboard -->
        <div class="role-dashboard" id="policymaker-dashboard">
            <div class="insights-panel">
                <h3>🏛️ Regional Water Management Overview</h3>
                <div class="alert-panel alert-critical">
                    <strong>🚨 Critical Alert:</strong> 3 districts showing water stress levels above 80%. Immediate policy intervention required.
                </div>
                <div class="insight-item">
                    <div class="insight-icon">📊</div>
                    <div class="insight-text">
                        <div class="insight-title">Regional Water Balance</div>
                        <div class="insight-desc">Northern region: Surplus 15% | Central: Balanced | Southern: Deficit 22%</div>
                    </div>
                </div>
                <div class="insight-item">
                    <div class="insight-icon">🏭</div>
                    <div class="insight-text">
                        <div class="insight-title">Industrial Impact Assessment</div>
                        <div class="insight-desc">Industrial Zone A consuming 35% above allocated limits, affecting nearby agricultural areas</div>
                    </div>
                </div>
            </div>
            
            <div class="dashboard">
                <div class="card">
                    <h3>🌍 Regional Overview</h3>
                    <div class="metric">
                        <span class="metric-label">Districts Monitored</span>
                        <span class="metric-value">24</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Water Stress Index</span>
                        <span class="metric-value trend-down">68% ⚠️</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Policy Compliance</span>
                        <span class="metric-value trend-up">82% ✅</span>
                    </div>
                </div>

                <div class="card">
                    <h3>📋 Action Items</h3>
                    <div class="metric">
                        <span class="metric-label">Pending Approvals</span>
                        <span class="metric-value">7</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Budget Allocation</span>
                        <span class="metric-value">₹2.4Cr</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Emergency Reserves</span>
                        <span class="metric-value trend-up">45% ✅</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Researcher Dashboard -->
        <div class="role-dashboard" id="researcher-dashboard">
            <div class="forecast-grid">
                <div class="forecast-card">
                    <div class="forecast-header">
                        <div class="forecast-icon">🧪</div>
                        <div>
                            <div class="forecast-title">Climate Pattern Analysis</div>
                            <div class="forecast-subtitle">Long-term Trends</div>
                        </div>
                    </div>
                    <div class="forecast-content">
                        <div class="forecast-item">
                            <span class="forecast-label">El Niño Probability</span>
                            <span class="forecast-value risk-medium">65%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill progress-drought" style="width: 65%"></div>
                        </div>
                        <div class="forecast-item">
                            <span class="forecast-label">Monsoon Strength</span>
                            <span class="forecast-value">Normal +15%</span>
                        </div>
                        <div class="forecast-item">
                            <span class="forecast-label">Temperature Anomaly</span>
                            <span class="forecast-value">+1.2°C</span>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button class="btn-small btn-success" onclick="exportData('climate')">Export Climate Data</button>
                    </div>
                </div>

                <div class="forecast-card">
                    <div class="forecast-header">
                        <div class="forecast-icon">📊</div>
                        <div>
                            <div class="forecast-title">Predictive Models</div>
                            <div class="forecast-subtitle">AI/ML Performance</div>
                        </div>
                    </div>
                    <div class="forecast-content">
                        <div class="forecast-item">
                            <span class="forecast-label">Drought Prediction</span>
                            <span class="forecast-value risk-low">94.3%</span>
                        </div>
                        <div class="forecast-item">
                            <span class="forecast-label">Flood Forecasting</span>
                            <span class="forecast-value risk-low">91.7%</span>
                        </div>
                        <div class="forecast-item">
                            <span class="forecast-label">Crop Yield Model</span>
                            <span class="forecast-value risk-medium">87.2%</span>
                        </div>
                        <div class="forecast-item">
                            <span class="forecast-label">Water Demand</span>
                            <span class="forecast-value risk-low">96.1%</span>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button class="btn-small btn-success" onclick="runAnalysis('models')">Run Analysis</button>
                    </div>
                </div>

                <div class="forecast-card">
                    <div class="forecast-header">
                        <div class="forecast-icon">🌡️</div>
                        <div>
                            <div class="forecast-title">Environmental Sensors</div>
                            <div class="forecast-subtitle">Multi-parameter Monitoring</div>
                        </div>
                    </div>
                    <div class="forecast-content">
                        <div class="forecast-item">
                            <span class="forecast-label">Soil Temperature</span>
                            <span class="forecast-value">24.5°C</span>
                        </div>
                        <div class="forecast-item">
                            <span class="forecast-label">Humidity</span>
                            <span class="forecast-value">68%</span>
                        </div>
                        <div class="forecast-item">
                            <span class="forecast-label">pH Level</span>
                            <span class="forecast-value">6.8</span>
                        </div>
                        <div class="forecast-item">
                            <span class="forecast-label">Conductivity</span>
                            <span class="forecast-value">450 µS/cm</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="smart-recommendations">
                <div class="recommendation-header">
                    <div class="recommendation-icon">🔬</div>
                    <div class="recommendation-title">Research Tools & Analysis</div>
                </div>
                <div class="recommendation-grid">
                    <div class="recommendation-item">
                        <div class="rec-title">Statistical Analysis</div>
                        <div class="rec-desc">Correlation between rainfall and groundwater recharge: R² = 0.87</div>
                    </div>
                    <div class="recommendation-item">
                        <div class="rec-title">Trend Detection</div>
                        <div class="rec-desc">Declining trend observed in 3 stations over 6-month period</div>
                    </div>
                    <div class="recommendation-item">
                        <div class="rec-title">Anomaly Detection</div>
                        <div class="rec-desc">2 unusual spikes detected in Industrial Zone A data</div>
                    </div>
                    <div class="recommendation-item">
                        <div class="rec-title">Data Quality</div>
                        <div class="rec-desc">99.2% completeness, 0.3% outliers flagged for review</div>
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="btn-small btn-success" onclick="exportData('research')">Export Dataset</button>
                    <button class="btn-small btn-warning" onclick="generateReport()">Generate Report</button>
                    <button class="btn-small btn-success" onclick="runAnalysis('correlation')">Run Correlation</button>
                </div>
            </div>
            
            <div class="dashboard">
                <div class="card">
                    <h3>📊 Data Quality Metrics</h3>
                    <div class="metric">
                        <span class="metric-label">Data Completeness</span>
                        <span class="metric-value trend-up">99.2% ✅</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Sensor Accuracy</span>
                        <span class="metric-value">±0.02m</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Sampling Rate</span>
                        <span class="metric-value">15 min</span>
                    </div>
                </div>

                <div class="card">
                    <h3>🧪 Research Findings</h3>
                    <div class="metric">
                        <span class="metric-label">Correlation Coeff.</span>
                        <span class="metric-value">0.87</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Seasonal Variance</span>
                        <span class="metric-value">±3.2m</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Trend Confidence</span>
                        <span class="metric-value trend-up">94.3% ✅</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="chart-container">
            <h3>📉 Real-Time Water Level Trends</h3>
            <div class="controls">
                <button class="btn btn-primary" onclick="updateTimeRange('1h')">1 Hour</button>
                <button class="btn btn-secondary" onclick="updateTimeRange('6h')">6 Hours</button>
                <button class="btn btn-secondary" onclick="updateTimeRange('24h')">24 Hours</button>
                <button class="btn btn-secondary" onclick="updateTimeRange('7d')">7 Days</button>
            </div>
            <canvas id="waterLevelChart" width="400" height="200"></canvas>
        </div>

        <h3 style="color: white; text-align: center; margin-bottom: 20px;">🏭 DWLR Station Status</h3>
        <div class="stations-grid" id="stationsGrid">
            <!-- Stations will be populated by JavaScript -->
        </div>
    </div>

    <script>
        // Sample DWLR station data
        const stations = [
            { id: 'DWLR001', name: 'Central Park Station', level: 18.5, status: 'online', trend: 'up' },
            { id: 'DWLR002', name: 'Industrial Zone A', level: 12.3, status: 'online', trend: 'down' },
            { id: 'DWLR003', name: 'Residential Area B', level: 22.1, status: 'online', trend: 'stable' },
            { id: 'DWLR004', name: 'Agricultural Field C', level: 8.7, status: 'offline', trend: 'down' },
            { id: 'DWLR005', name: 'River Basin D', level: 25.4, status: 'online', trend: 'up' },
            { id: 'DWLR006', name: 'Urban Center E', level: 16.8, status: 'online', trend: 'stable' }
        ];

        let chart;
        let currentTimeRange = '1h';

        // Initialize the chart
        function initChart() {
            const ctx = document.getElementById('waterLevelChart').getContext('2d');
            
            // Generate sample data points
            const now = new Date();
            const labels = [];
            const data = [];
            
            for (let i = 23; i >= 0; i--) {
                const time = new Date(now.getTime() - i * 60 * 60 * 1000);
                labels.push(time.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}));
                data.push(15 + Math.sin(i * 0.3) * 3 + Math.random() * 2);
            }

            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Water Level (meters)',
                        data: data,
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: {
                                display: true,
                                text: 'Water Level (meters)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Time'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    }
                }
            });
        }

        // Update time range
        function updateTimeRange(range) {
            currentTimeRange = range;
            
            // Update button styles
            document.querySelectorAll('.controls .btn').forEach(btn => {
                btn.className = 'btn btn-secondary';
            });
            event.target.className = 'btn btn-primary';
            
            // Generate new data based on time range
            updateChartData();
        }

        // Update chart data
        function updateChartData() {
            const now = new Date();
            const labels = [];
            const data = [];
            
            let points, interval;
            switch(currentTimeRange) {
                case '1h':
                    points = 12;
                    interval = 5 * 60 * 1000; // 5 minutes
                    break;
                case '6h':
                    points = 24;
                    interval = 15 * 60 * 1000; // 15 minutes
                    break;
                case '24h':
                    points = 24;
                    interval = 60 * 60 * 1000; // 1 hour
                    break;
                case '7d':
                    points = 28;
                    interval = 6 * 60 * 60 * 1000; // 6 hours
                    break;
            }
            
            for (let i = points - 1; i >= 0; i--) {
                const time = new Date(now.getTime() - i * interval);
                if (currentTimeRange === '7d') {
                    labels.push(time.toLocaleDateString([], {month: 'short', day: 'numeric'}));
                } else {
                    labels.push(time.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}));
                }
                data.push(15 + Math.sin(i * 0.2) * 4 + Math.random() * 1.5);
            }
            
            chart.data.labels = labels;
            chart.data.datasets[0].data = data;
            chart.update();
        }

        // Render station cards
        function renderStations() {
            const grid = document.getElementById('stationsGrid');
            grid.innerHTML = '';
            
            stations.forEach(station => {
                const card = document.createElement('div');
                card.className = 'station-card';
                
                const fillHeight = Math.min((station.level / 30) * 100, 100);
                const trendIcon = station.trend === 'up' ? '↗️' : station.trend === 'down' ? '↘️' : '➡️';
                
                card.innerHTML = `
                    <div class="station-header">
                        <div class="station-name">${station.name}</div>
                        <div class="station-status ${station.status === 'online' ? 'status-online' : 'status-offline'}">
                            ${station.status.toUpperCase()}
                        </div>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Station ID</span>
                        <span class="metric-value">${station.id}</span>
                    </div>
                    <div class="water-visual">
                        <div class="water-fill" style="height: ${fillHeight}%"></div>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Current Level</span>
                        <span class="metric-value water-level">${station.level}m ${trendIcon}</span>
                    </div>
                `;
                
                grid.appendChild(card);
            });
        }

        // Simulate real-time updates
        function simulateRealTimeUpdates() {
            setInterval(() => {
                // Update station levels
                stations.forEach(station => {
                    if (station.status === 'online') {
                        const change = (Math.random() - 0.5) * 0.2;
                        station.level = Math.max(0, station.level + change);
                        station.level = Math.round(station.level * 10) / 10;
                    }
                });
                
                // Update overview metrics
                const activeCount = stations.filter(s => s.status === 'online').length;
                const avgLevel = stations.filter(s => s.status === 'online')
                    .reduce((sum, s) => sum + s.level, 0) / activeCount;
                
                document.getElementById('activeStations').textContent = activeCount;
                document.getElementById('avgLevel').textContent = Math.round(avgLevel * 10) / 10 + 'm';
                document.getElementById('lastUpdate').textContent = 'Just now';
                
                // Re-render stations
                renderStations();
                
                // Add new data point to chart
                const now = new Date();
                const newLevel = 15 + Math.sin(Date.now() * 0.001) * 3 + Math.random() * 2;
                
                chart.data.labels.push(now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}));
                chart.data.datasets[0].data.push(newLevel);
                
                // Keep only last 24 points for 1h view
                if (chart.data.labels.length > 24) {
                    chart.data.labels.shift();
                    chart.data.datasets[0].data.shift();
                }
                
                chart.update('none');
            }, 5000); // Update every 5 seconds
        }

        // Switch between user roles
        function switchUser(userType) {
            // Update user card selection
            document.querySelectorAll('.user-card').forEach(card => {
                card.classList.remove('active');
            });
            event.target.closest('.user-card').classList.add('active');
            
            // Hide all dashboards
            document.querySelectorAll('.role-dashboard').forEach(dashboard => {
                dashboard.classList.remove('active');
            });
            
            // Show selected dashboard
            document.getElementById(userType + '-dashboard').classList.add('active');
            
            // Update chart title and data based on user type
            updateChartForUser(userType);
        }
        
        // Update chart based on user role
        function updateChartForUser(userType) {
            let chartTitle = '';
            let chartColor = '';
            
            switch(userType) {
                case 'farmer':
                    chartTitle = '🌾 Farm Zone Water Levels';
                    chartColor = '#10b981';
                    break;
                case 'policymaker':
                    chartTitle = '🏛️ Regional Water Management Trends';
                    chartColor = '#8b5cf6';
                    break;
                case 'researcher':
                    chartTitle = '🔬 Research Data Analysis';
                    chartColor = '#f59e0b';
                    break;
            }
            
            // Update chart appearance
            chart.data.datasets[0].borderColor = chartColor;
            chart.data.datasets[0].backgroundColor = chartColor + '20';
            chart.options.plugins.title = {
                display: true,
                text: chartTitle,
                font: { size: 16, weight: 'bold' }
            };
            chart.update();
        }

        // Alert and notification functions
        function sendAlert(type) {
            let message = '';
            switch(type) {
                case 'irrigation':
                    message = '✅ Irrigation reminder set for tomorrow 6:00 AM';
                    break;
                case 'weather':
                    message = '📱 Weather alert SMS will be sent to registered farmers';
                    break;
            }
            
            // Create notification
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #10b981;
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                z-index: 1000;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
        
        // Export data function
        function exportData(type) {
            let filename = '';
            let message = '';
            
            switch(type) {
                case 'climate':
                    filename = 'climate_data_' + new Date().toISOString().split('T')[0] + '.csv';
                    message = '📊 Climate data exported successfully';
                    break;
                case 'research':
                    filename = 'groundwater_research_' + new Date().toISOString().split('T')[0] + '.csv';
                    message = '🔬 Research dataset exported successfully';
                    break;
            }
            
            // Simulate file download
            const link = document.createElement('a');
            link.href = 'data:text/csv;charset=utf-8,Station,Date,WaterLevel,Temperature,Humidity\nDWLR001,2024-01-15,18.5,24.5,68\nDWLR002,2024-01-15,12.3,25.1,65';
            link.download = filename;
            link.click();
            
            showNotification(message, 'success');
        }
        
        // Generate report function
        function generateReport() {
            showNotification('📋 Comprehensive research report generated and saved', 'success');
            
            // Simulate report generation
            setTimeout(() => {
                const link = document.createElement('a');
                link.href = 'data:text/html;charset=utf-8,<h1>Groundwater Research Report</h1><p>Generated on: ' + new Date().toLocaleDateString() + '</p>';
                link.download = 'groundwater_report_' + new Date().toISOString().split('T')[0] + '.html';
                link.click();
            }, 1000);
        }
        
        // Run analysis function
        function runAnalysis(type) {
            let message = '';
            
            switch(type) {
                case 'models':
                    message = '🤖 Running predictive model analysis...';
                    break;
                case 'correlation':
                    message = '📊 Computing correlation analysis...';
                    break;
            }
            
            showNotification(message, 'info');
            
            // Simulate analysis completion
            setTimeout(() => {
                showNotification('✅ Analysis completed successfully', 'success');
            }, 2000);
        }
        
        // Notification helper function
        function showNotification(message, type) {
            const colors = {
                success: '#10b981',
                info: '#3b82f6',
                warning: '#f59e0b',
                error: '#ef4444'
            };
            
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${colors[type]};
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                z-index: 1000;
                animation: slideIn 0.3s ease;
                max-width: 300px;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Initialize everything
        document.addEventListener('DOMContentLoaded', function() {
            initChart();
            renderStations();
            simulateRealTimeUpdates();
            
            // Set initial chart for farmer
            updateChartForUser('farmer');
            
            // Simulate real-time weather updates
            setInterval(() => {
                updateWeatherData();
            }, 30000); // Update every 30 seconds
        });
        
        // Update weather data simulation
        function updateWeatherData() {
            // Update drought risk
            const droughtRisk = Math.random() * 100;
            const droughtBar = document.querySelector('.progress-drought');
            if (droughtBar) {
                droughtBar.style.width = droughtRisk + '%';
            }
            
            // Update flood risk
            const floodRisk = Math.random() * 100;
            const floodBar = document.querySelector('.progress-flood');
            if (floodBar) {
                floodBar.style.width = floodRisk + '%';
            }
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97fe45f6831cffa7',t:'MTc1ODAwMzc4Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
